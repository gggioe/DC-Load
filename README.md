Work in progress. At this point, no fully functional board has been produced. Some functional blocks or components have been tested with good results, but since this is a hobby project, there is no ETA. Software and Hardware (even this repo) will be constantly updated. I plan to release a fully functional prototype as soon as possible.

# The Idea
The idea is to build a fully functional instrument that can be easily compared to commercial ones. Commercially available loads are precise, some of them are software-controlled and come with a warranty, however, they tend to not have a high performance/price ratio. Some cheap 30-50 euros Chinese designs are just bad, with very limited specs (generally under 50V, 5A, 100W), and also they tend to use fake or extremely cheap components that fail even at the advertised specs. "Hobbyist" good quality  400 euros loads come with limited specifications like 150V, 20A, and 200W max power. This is ok for general-purpose power supply tests however, nowadays battery tends to have high discharge rates so if you want to test your e-bike battery pack for example, more expensive loads capable of 60-100A, 3-4 kW should be used. Those types of loads however tend to have very high prices>2k and in some cases, you have to be a company to know the exact price. Online exist various more or less good DIY attempts, however, some are a complete joke with specs like 2A, 20V, and 40W max. Don't get me wrong, 20V 2A is perfectly fine for low-power IOT stuff for example, however, nowadays devices tend to get more and more power hungry and power supply more powerful, with a 40w limit even a modern type c phone charger is impossible to fully test. More complex ones are not as precise as i hoped or maybe do not come with an interface that makes it a real bench instrument. Overall all of these projects gave me the impression of being a little "incomplete" and i had a feeling that no one really attempted a commercially competitive DIY solution. At this point, the only thing to do is to build my own DC electronic load that can be used as a real instrument and hopefully be a decent competitor of some commercial solutions, how hard can it be?... right?...

# General design specifications
The main goals are: 

-Good precision: Precise components are cheap these days so since in most cases they outperform more complex discrete designs both in specs and dimension, i will use them without complaining. In general, around 10mA accuracy should be ok for a high power load and for the average hobbyist like me. 

-Good stability: the system should not spontaneously oscillate for example when a too-high/low current is set. Aggressive transient or step can be quite challenging, even if the simulation shows good results, parasitic inductance/capacitance of the real world in components/wiring/trace can cause some instability. What makes the situation worse is that real-world instability/noise can be quite challenging to reproduce in simulation so for now since i do not have the right equipment, i will trust the simulation.

-Safety: The load should remain relatively safe in case of catastrophic failures like reverse polarity or input overvoltage. Due to the moderate-high voltage (maybe up to 500v in later design). Isolation is also a key factor, if an earthed, relatively high voltage source is connected, the user interface like display, button, encoder, pc, etc. should remain isolated. When browsing the internet i noticed that a common flaw that both commercial and non-commercial loads share is the lack of a proper DC-rated transistor, common design even in the 3/400 euro price point tends to use IRF260N (or similar) mosfet, however, if you take a look at the datasheet (safe operating area) they are not even DC rated, this means that DC operation (which is the average operation) is not safe for them. Companies generally compensate by massively underloading them but for me, it is just a bad design. Maybe those transistors were independently tested however in my design i want to use only properly manufactured DC-rated components.

-Modularity: If not too difficult, a modular design is well accepted since it allows to have multiple configurations. Due to the tight demands, if a module ends up being expensive the user who may not need too high specs can build a lower-cost unit and later if necessary add modules to expand the power capability. Of course, if multiple modules in parallel are connected the overall accuracy is reduced because the overall error will be the sum of the error of each module.

-Competitive specs: If i will be not able to achieve at least the same specifications as commercial products there is no point continuing to develop this project since in that case, a worse product will cost me around the same as a commercial well-established one. A good starting point for me is to at least match the commercial product specs so: ≥150V, ≥200W, and since the modular design ≥20A per module should be fine.

-Price: Obviously the cost should remain as low as possible, however, due to my demands an acceptable price will be <100 euros per module. In that case, a complete unit with similar (or even better) specs of commercial loads will end up costing less than the commercial solution.


# Power and Thermal considerations
At now on mouser the best mosfet regarding quality/price ratio is the FDP61N20 however higher power (and more expensive) mosfet such as FDH45N50 can be used, later in the design i will mark some good mid-range alternatives. Due to the relatively small mosfet surface area, in order to get the best performance liquid metal and water cooling system should be used in order to get the best performance. The overall dissipated power strictly depends on the used mosfet, by using a relatively large package transistor with 40x80 water block, liquid metal, and adequate size radiator/pump, 1kW or more (in case of multiple modules in parallel) should be possible. As intuition, heat is the critical part of this project, mosfet has a temperature derating curve that should not be excedeed for safe DC operation, even if a mosfet is 450W max rated for example this will not be true at 50 degree case temperature. Due to the junction-case thermal resistance if the derating curve is not respected even with a relatively low case temperature of around 50 degrees the die will exceed the 150 degree limit thus destroying the transistor. To make things worse each thermal "layer" such as thermal paste, radiator, etc. has its own thermal resistance that adds up to the total mosfet-ambient thermal resistance. At this point i perform some thermal estimation, however, it does not make much sense to upload these numbers since these are just guesses, because to my surprise even large radiator/thermal paste manufacturers do not share the thermal property of their product such as thermal resistance, airflow graph, etc. At this point is unclear to me how without the exact manufacture number the end user should implement a product. It seems like even the pc builder community does not have a clear answer to my problem, and i really don't trust any rule of thumb (like the 120mm x 100W). Now, even if i already know that this is not possible, the only thing that i can do is to experimentally validate each solution starting from the "best", in reality since this will cost me way too much money and time i think that i will use one 80x40 copper (or nickel-plated) water block + Galinstan based thermal compound and then add 120x240 or 120x360mm radiator until i reach decent temperatures.

# Simulation and Waveform
Module Schematic:
![alt text](https://github.com/gggioe/DC-Load/blob/main/Simulations/Pictures/DC_Load_Module.png)

1mA Pulsed test:
![alt text](https://github.com/gggioe/DC-Load/blob/main/Simulations/Pictures/DC_Load_Module_wf.png)
Even with slightly worse performing op-amps, 1mA is theoretically possible

20A Pulsed test:
![alt text](https://github.com/gggioe/DC-Load/blob/main/Simulations/Pictures/20A_Waveforms.png)


